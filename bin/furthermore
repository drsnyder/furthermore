#!/usr/bin/env python
# vim: ft=python
import re
import os
import sys
import textile
from mako.template import Template
from optparse import OptionParser

sys.path.append("%s/../lib" % os.path.dirname(__file__))

import furthermore

if __name__ == '__main__':
    usage = """usage: %prog [options]

    """ 


    parser = OptionParser(usage)
    parser.add_option("-f", "--file", dest="file", help="file to process")
    parser.add_option("-T", "--template_dir", dest="template_dir", \
            default="%s/../templates" % os.path.dirname(__file__), \
            help="template directory")
    parser.add_option("-o", "--out", dest="out", help="file to write out to")


    (options, args) = parser.parse_args()


    (header, content) = furthermore.parse_document_file(options.file)
    text = furthermore.render_document(header, content)
    print text
